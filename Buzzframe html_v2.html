<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Buzzword Decoder &amp; Encoder – BuzzFrame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="BuzzFrame übersetzt Stellenanzeigen, Behördendeutsch und LinkedIn-Geschwurbel in Klartext – und umgekehrt." />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg-body: #020617;
      --bg-surface: #020617;
      --bg-surface-elevated: #0b1020;
      --bg-card: #020617;
      --border-subtle: #1f2937;
      --border-strong: #4b5563;
      --accent: #6366f1;
      --accent-soft: rgba(99, 102, 241, 0.14);
      --accent-strong: #4f46e5;
      --accent-gradient: linear-gradient(135deg, #6366f1, #22c1c3);
      --accent-muted: rgba(199, 210, 254, 0.95);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --text-soft: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --shadow-soft: 0 24px 60px rgba(15, 23, 42, 0.85);
      --shadow-subtle: 0 18px 40px rgba(15, 23, 42, 0.8);
      --input-bg: #020617;
      --input-border: #1f2937;
      --input-border-focus: #6366f1;
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #000 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 32px 16px 40px;
      font-size: 16px;
      line-height: 1.5;
    }

    .page {
      width: 100%;
      max-width: 960px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }

    /* Hero */

    .hero {
      position: relative;
      overflow: hidden;
      border-radius: 32px;
      padding: 30px 24px 26px;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.24), transparent 55%),
        radial-gradient(circle at top right, rgba(129, 140, 248, 0.24), transparent 55%),
        radial-gradient(circle at bottom left, rgba(34, 197, 94, 0.24), transparent 55%),
        #020617;
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: var(--shadow-soft);
    }

    .hero-main {
      position: relative;
      z-index: 1;
      max-width: 720px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px 4px 4px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      margin-bottom: 14px;
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-soft);
      backdrop-filter: blur(16px);
    }

    .badge-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid rgba(129, 140, 248, 0.6);
      font-size: 11px;
    }

    .badge-label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .hero-title {
      font-size: clamp(26px, 3.1vw, 34px);
      font-weight: 700;
      letter-spacing: -0.03em;
      margin: 0 0 16px;
      color: #f9fafb;
    }

    .hero-subtitle {
      font-size: 18px;
      font-weight: 500;
      color: var(--accent-muted);
      margin: 0 0 18px;
    }

    .hero-body {
      font-size: 15px;
      line-height: 1.6;
      color: var(--text-soft);
      max-width: 640px;
      margin: 0 0 14px;
    }

    .hero-body p {
      margin: 0 0 8px;
    }

    .hero-body p:last-child {
      margin-bottom: 0;
    }

    .hero-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-top: 14px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .meta-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .meta-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .hero-cta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-top: 22px;
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border-radius: 999px;
      padding: 10px 20px;
      border: none;
      outline: none;
      background-image: linear-gradient(135deg, #4f46e5, #22c1c3);
      color: #f9fafb;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(37, 99, 235, 0.35);
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
      white-space: nowrap;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.03);
      box-shadow: 0 18px 45px rgba(37, 99, 235, 0.45);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.75);
      filter: brightness(0.97);
    }

    .btn-primary[disabled] {
      opacity: 0.7;
      cursor: wait;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.8);
    }

    /* Main (Form + Output in Column) */

    main {
      margin-top: 8px;
      padding-top: 20px;
      border-top: 1px solid rgba(31, 41, 55, 0.85);
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .stack-left,
    .stack-right {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    /* Cards */

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      padding: 20px 18px 16px;
      box-shadow: var(--shadow-subtle);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin: 0 0 4px;
    }

    .card-kicker {
      font-size: 17px;
      font-weight: 500;
      color: #f9fafb;
      margin: 0;
    }

    .card-sub {
      font-size: 13px;
      color: #cbd5f5;
      margin-top: 6px;
    }

    .card-tag {
      font-size: 11px;
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.96);
      white-space: nowrap;
    }

    /* Form */

    form {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .form-label {
      font-size: 13px;
      font-weight: 500;
      color: #e5e7eb;
      display: inline-flex;
      align-items: baseline;
      gap: 4px;
    }

    .required {
      color: #f97373;
      font-size: 11px;
    }

    .helper-text {
      font-size: 12px;
      color: #d1d5db;
    }

    .textarea,
    .input {
      width: 100%;
      border-radius: var(--radius-md);
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text-main);
      padding: 10px 11px;
      font-size: 14px;
      resize: vertical;
      min-height: 130px;
      outline: none;
      transition: border-color 0.12s ease-out, box-shadow 0.12s ease-out, background 0.12s ease-out;
      line-height: 1.5;
    }

    .textarea:focus,
    .input:focus {
      border-color: var(--input-border-focus);
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.4);
      background: #020617;
    }

    .textarea::placeholder {
      color: rgba(107, 114, 128, 0.9);
    }

    .fieldset {
      border-radius: var(--radius-md);
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: rgba(15, 23, 42, 0.92);
      padding: 11px 10px 10px;
    }

    .fieldset-legend {
      font-size: 11px;
      font-weight: 500;
      color: var(--text-muted);
      margin-bottom: 6px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .fieldset-main-label {
      font-size: 14px;
      font-weight: 500;
      color: #f9fafb;
      margin-bottom: 8px;
    }

    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .radio-option {
      position: relative;
      display: flex;
      align-items: flex-start;
      gap: 8px;
      padding: 7px 8px;
      border-radius: 10px;
      border: 1px solid rgba(31, 41, 55, 0.95);
      background: rgba(15, 23, 42, 0.98);
      cursor: pointer;
      transition: border-color 0.12s ease-out, background 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .radio-option:hover {
      border-color: rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 1);
    }

    .radio-bullet {
      margin-top: 2px;
    }

    .radio-bullet input[type="radio"],
    .radio-bullet input[type="checkbox"] {
      width: 14px;
      height: 14px;
      margin: 0;
      accent-color: var(--accent);
      cursor: pointer;
    }

    .radio-copy {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .radio-label {
      font-size: 13px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .radio-description {
      font-size: 12px;
      color: #d1d5db;
    }

    .radio-option--active {
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.6);
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.12), rgba(15, 23, 42, 0.98));
    }

    .fieldset-inline-note {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    .form-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 4px;
    }

    .form-actions {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-secondary {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 7px 10px;
      background: transparent;
      color: var(--text-soft);
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: border-color 0.12s ease-out, color 0.12s ease-out, background 0.12s ease-out;
    }

    .btn-secondary:hover {
      border-color: rgba(148, 163, 184, 0.8);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
    }

    .form-hint {
      font-size: 11px;
      color: var(--text-soft);
    }

    .error-text {
      margin-top: 8px;
      font-size: 12px;
      color: var(--danger);
    }

    /* Response */

    .card-response {
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.1), rgba(15, 23, 42, 0.97));
      border-color: rgba(99, 102, 241, 0.5);
    }

    .response-textarea {
      width: 100%;
      border-radius: var(--radius-md);
      border: 1px solid rgba(31, 41, 55, 0.95);
      background: #020617;
      color: var(--text-main);
      padding: 10px 11px;
      font-size: 14px;
      min-height: 220px;
      resize: vertical;
      outline: none;
      font-family: var(--font-sans);
      line-height: 1.5;
      transition: border-color 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .response-textarea:focus {
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.6);
    }

    .response-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
    }

    .response-actions {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-copy {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.85);
      padding: 7px 12px;
      background: rgba(15, 23, 42, 0.98);
      color: #e5e7eb;
      font-size: 12px;
      cursor: pointer;
      transition: border-color 0.12s ease-out, background 0.12s ease-out, transform 0.12s ease-out;
    }

    .btn-copy:hover {
      border-color: #e5e7eb;
      background: rgba(15, 23, 42, 1);
      transform: translateY(-0.5px);
    }

    .copy-status {
      font-size: 11px;
      color: var(--text-soft);
    }

    /* Footer */

    footer {
      padding-top: 10px;
      margin-top: 6px;
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .footer-links {
      display: inline-flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--text-soft);
      text-decoration: none;
      position: relative;
    }

    .footer-links a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0;
      height: 1px;
      background: rgba(148, 163, 184, 0.9);
      transition: width 0.15s ease-out;
    }

    .footer-links a:hover::after {
      width: 100%;
    }

    /* Hidden utility */

    .hidden {
      display: none !important;
    }

    @media (max-width: 640px) {
      body {
        padding: 22px 12px 28px;
      }
      .hero {
        border-radius: 22px;
        padding: 24px 16px 20px;
      }
      .card {
        border-radius: 16px;
        padding-inline: 14px;
      }
      footer {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-main">
        <div class="badge">
          <span class="badge-pill">BF</span>
          <span class="badge-label">
            BuzzFrame · Single Purpose
          </span>
        </div>
        <h1 class="hero-title">Buzzword Decoder &amp; Encoder</h1>
        <h2 class="hero-subtitle">
          Übersetzt Stellenanzeigen, Behördendeutsch und LinkedIn-Geschwurbel in Klartext – und umgekehrt.
        </h2>
        <div class="hero-body">
          <p>Du fügst einen Text ein, wählst Richtung und Modus – BuzzFrame macht den Rest.</p>
          <p>Geschwurbel wird zu verständlichem Klartext oder dein nüchterner Text bekommt auf Wunsch eine saubere Ladung Corporate-Buzzwords, von „Corporate Lite“ bis „Theater / Overkill“.</p>
          <p>Kein Prompt-Gebastel, kein Chatverlauf: ein Formular, ein Klick, ein Ergebnis, das du direkt kopieren kannst.</p>
        </div>
        <div class="hero-meta">
          <div class="meta-item">
            <span class="meta-dot"></span>
            <span>Optimiert für Stellenanzeigen, Mails, LinkedIn-Posts, interne Papiere</span>
          </div>
          <div class="meta-item">
            <span class="meta-dot"></span>
            <span>Keine Registrierung, kein Login – direkt im Browser</span>
          </div>
        </div>
        <div class="hero-cta-row">
          <button type="button" class="btn-primary" id="scrollToForm">
            Formular starten
          </button>
        </div>
      </div>
    </section>

    <!-- MAIN: FORM + OUTPUT -->
    <main>
      <!-- FORM -->
      <div class="stack-left">
        <section class="card" id="form-card">
          <div class="card-header">
            <div>
              <p class="card-title">Eingabe</p>
              <p class="card-kicker">Text, Richtung, Modus wählen</p>
              <p class="card-sub">Felder mit <span class="required">*</span> sind Pflichtfelder.</p>
            </div>
            <div class="card-tag">Ohne Prompt-Engineering</div>
          </div>

          <form id="buzzframe-form" novalidate>
            <!-- Text / Aussage -->
            <div class="form-field">
              <label class="form-label" for="source_text">
                Text / Aussage, um die es geht
                <span class="required">*</span>
              </label>
              <textarea
                id="source_text"
                name="source_text"
                class="textarea"
                placeholder="Zum Beispiel: eine Stellenanzeige, ein LinkedIn-Post, eine Mail oder ein Absatz aus einem Vertrag."
              ></textarea>
              <div class="helper-text">
                Füge hier die Stellenanzeige, Mail oder den Text ein, den du übersetzen willst. Maximal 2000 Wörter.
              </div>
            </div>

            <!-- Richtung -->
            <div class="fieldset">
              <div class="fieldset-legend">Richtung</div>
              <div class="fieldset-main-label">
                Was soll passieren? <span class="required">*</span>
              </div>
              <div class="radio-group" id="direction-group">
                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="radio" name="direction" value="decode" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Geschwurbel → Klartext (Decoder)</span>
                    <span class="radio-description">
                      Buzzword-, Behörden- oder HR-Deutsch in verständliche Sprache übersetzen.
                    </span>
                  </span>
                </label>

                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="radio" name="direction" value="encode" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Klartext → Buzzword-Sprech (Encoder)</span>
                    <span class="radio-description">
                      Nüchterne Aussagen in praxistaugliches Corporate-Deutsch oder Satire-Overkill verwandeln.
                    </span>
                  </span>
                </label>
              </div>
              <div class="fieldset-inline-note">
                Die Richtung steuert, ob BuzzFrame entschlüsselt oder bewusst „aufschäumt“.
              </div>
            </div>

            <!-- Modus: Decoder (multi-select) -->
            <div class="fieldset hidden" id="mode-decode-block">
              <div class="fieldset-legend">Modus · Decoder</div>
              <div class="fieldset-main-label">
                Wie direkt soll es werden?
                <span class="required">*</span>
              </div>
              <div class="radio-group" id="mode-decode-group">
                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="decode_klartext" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Klartext</span>
                    <span class="radio-description">
                      Alles Wichtige in normalem Business-Deutsch. Ohne unnötige Härte, ohne Weichspüler.
                    </span>
                  </span>
                </label>

                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="decode_destillat" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Destillat</span>
                    <span class="radio-description">
                      Nur der nackte Kern in 1–3 Sätzen. Ideal für schnelle Entscheidungen.
                    </span>
                  </span>
                </label>

                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="decode_kind" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Für 10-Jährige</span>
                    <span class="radio-description">
                      Erklärt wie für ein Kind, ohne Fachbegriffe. Maximale Verständlichkeit.
                    </span>
                  </span>
                </label>
              </div>
              <div class="fieldset-inline-note">
                Du kannst mehrere Modi kombinieren, z. B. Klartext und Destillat.
              </div>
            </div>

            <!-- Modus: Encoder (multi-select) -->
            <div class="fieldset hidden" id="mode-encode-block">
              <div class="fieldset-legend">Modus · Encoder</div>
              <div class="fieldset-main-label">
                Wie stark soll der Buzzword-Level sein?
                <span class="required">*</span>
              </div>
              <div class="radio-group" id="mode-encode-group">
                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="encode_corporate_lite" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Corporate Lite</span>
                    <span class="radio-description">
                      Leicht buzzwordig, noch ernsthaft nutzbar. Für Slides, Memos und Jobsuchen.
                    </span>
                  </span>
                </label>

                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="encode_full_corporate" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Full Corporate</span>
                    <span class="radio-description">
                      Deutlich geschwurbelt, klar satirisch, aber lesbar. Für interne „wir wissen, was wir tun“-Momente.
                    </span>
                  </span>
                </label>

                <label class="radio-option">
                  <span class="radio-bullet">
                    <input type="checkbox" name="modes" value="encode_overkill" />
                  </span>
                  <span class="radio-copy">
                    <span class="radio-label">Theater / Overkill</span>
                    <span class="radio-description">
                      Maximal überdreht, rein fürs Entertainment. Nicht für offizielle Kommunikation.
                    </span>
                  </span>
                </label>
              </div>
              <div class="fieldset-inline-note">
                Mehrere Modi möglich, z. B. Corporate Lite und Full Corporate.
              </div>
            </div>

            <!-- Footer / Buttons -->
            <div class="form-footer">
              <div class="form-actions">
                <button type="submit" class="btn-primary" id="submitButton">
                  Output generieren
                </button>
                <button type="button" class="btn-secondary" id="resetForm">
                  Formular leeren
                </button>
              </div>
              <div class="form-hint">
                Die Eingabe wird über eine API verarbeitet. Keine Speicherung für Training.
              </div>
            </div>

            <div id="formError" class="error-text" style="display:none;"></div>
          </form>
        </section>
      </div>

      <!-- OUTPUT -->
      <div class="stack-right">
        <section class="card card-response" id="response-card">
          <div class="card-header">
            <div>
              <p class="card-title">Output</p>
              <p class="card-kicker">Dein übersetzter Text</p>
              <p class="card-sub">
                Direkt editierbar, zum Einfügen in Mails, Bewerbungen oder Posts.
              </p>
            </div>
            <div class="card-tag">API Response</div>
          </div>
          <textarea
            id="responseText"
            class="response-textarea"
            placeholder="Hier erscheint der Output, sobald du einen Text übersetzt hast."
          ></textarea>
          <div class="response-footer">
            <div class="response-actions">
              <button type="button" class="btn-copy" id="copyButton">
                <span>Text kopieren</span>
              </button>
              <button type="button" class="btn-secondary" id="resetOutput">
                Output leeren
              </button>
            </div>
            <div class="copy-status" id="copyStatus"></div>
          </div>
        </section>
      </div>
    </main>

    <!-- FOOTER -->
    <footer>
      <div class="footer-links">
        <a href="/impressum.html">Impressum</a>
        <a href="/datenschutz.html">Datenschutz</a>
      </div>
      <div>
        <div>© 2025 BuzzFrame. Single-Purpose Tools für saubere Sprache.</div>
        <div class="helper-text">
          Outputs sind Vorschläge ohne Rechtsverbindlichkeit. Prüfe Inhalte, bevor du sie extern nutzt.
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Smooth scroll to form
    (function () {
      const scrollBtn = document.getElementById('scrollToForm');
      const formCard = document.getElementById('form-card');
      if (!scrollBtn || !formCard) return;

      scrollBtn.addEventListener('click', function () {
        formCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    })();

    // Radio highlight for direction
    function wireActiveRadioHighlight(groupId) {
      const group = document.getElementById(groupId);
      if (!group) return;
      const options = group.querySelectorAll('.radio-option');

      options.forEach((opt) => {
        const input = opt.querySelector('input[type="radio"]');
        if (!input) return;

        input.addEventListener('change', () => {
          options.forEach(o => o.classList.remove('radio-option--active'));
          if (input.checked) {
            opt.classList.add('radio-option--active');
          }
        });

        opt.addEventListener('click', (e) => {
          if (e.target.tagName.toLowerCase() !== 'input') {
            input.checked = true;
            input.dispatchEvent(new Event('change', { bubbles: true }));
          }
        });
      });
    }

    // Checkbox highlight for modes (multi-select)
    function wireCheckboxHighlight(groupId) {
      const group = document.getElementById(groupId);
      if (!group) return;
      const options = group.querySelectorAll('.radio-option');

      options.forEach((opt) => {
        const input = opt.querySelector('input[type="checkbox"]');
        if (!input) return;

        input.addEventListener('change', () => {
          if (input.checked) {
            opt.classList.add('radio-option--active');
          } else {
            opt.classList.remove('radio-option--active');
          }
        });
      });
    }

    wireActiveRadioHighlight('direction-group');
    wireCheckboxHighlight('mode-decode-group');
    wireCheckboxHighlight('mode-encode-group');

    // Direction -> Mode block toggling
    (function () {
      const form = document.getElementById('buzzframe-form');
      if (!form) return;

      const decodeBlock = document.getElementById('mode-decode-block');
      const encodeBlock = document.getElementById('mode-encode-block');
      const directionRadios = form.querySelectorAll('input[name="direction"]');
      const modeInputs = form.querySelectorAll('input[name="modes"]');

      function clearModeSelection() {
        modeInputs.forEach(r => {
          r.checked = false;
          const opt = r.closest('.radio-option');
          if (opt) opt.classList.remove('radio-option--active');
        });
      }

      function handleDirectionChange() {
        const selected = Array.from(directionRadios).find(r => r.checked)?.value;
        if (!selected) {
          if (decodeBlock) decodeBlock.classList.add('hidden');
          if (encodeBlock) encodeBlock.classList.add('hidden');
          clearModeSelection();
          return;
        }

        if (selected === 'decode') {
          if (decodeBlock) decodeBlock.classList.remove('hidden');
          if (encodeBlock) encodeBlock.classList.add('hidden');
        } else if (selected === 'encode') {
          if (encodeBlock) encodeBlock.classList.remove('hidden');
          if (decodeBlock) decodeBlock.classList.add('hidden');
        }

        clearModeSelection();
      }

      // Initial: beide Modus-Blöcke verstecken
      if (decodeBlock) decodeBlock.classList.add('hidden');
      if (encodeBlock) encodeBlock.classList.add('hidden');

      directionRadios.forEach(radio => {
        radio.addEventListener('change', handleDirectionChange);
      });
    })();

    // Form submission -> Netlify Function -> Make
    (function () {
      const form = document.getElementById('buzzframe-form');
      if (!form) return;

      const submitButton = document.getElementById('submitButton');
      const resetButton = document.getElementById('resetForm');
      const formError = document.getElementById('formError');
      const responseText = document.getElementById('responseText');
      const responseCard = document.getElementById('response-card');
      const copyStatus = document.getElementById('copyStatus');

      async function handleSubmit(event) {
        event.preventDefault();
        if (formError) {
          formError.style.display = 'none';
          formError.textContent = '';
        }

        const rawText = form.source_text?.value || '';
        const text = rawText.trim();
        const direction = form.direction?.value || '';
        const modes = Array
          .from(form.querySelectorAll('input[name="modes"]:checked'))
          .map(i => i.value);

        if (!text) {
          if (formError) {
            formError.textContent = 'Bitte füge zuerst einen Text ein.';
            formError.style.display = 'block';
          }
          return;
        }

        // Wortlimit: 2000 Wörter
        const words = text.split(/\s+/).filter(Boolean);
        if (words.length > 2000) {
          if (formError) {
            formError.textContent =
              'Der Text ist zu lang. Maximal 2000 Wörter, aktuell ' + words.length + '. Kürze den Input.';
            formError.style.display = 'block';
          }
          return;
        }

        if (!direction) {
          if (formError) {
            formError.textContent = 'Bitte wähle, ob decodiert oder encodiert werden soll.';
            formError.style.display = 'block';
          }
          return;
        }

        if (!modes.length) {
          if (formError) {
            formError.textContent = 'Bitte wähle mindestens einen Modus für die gewählte Richtung.';
            formError.style.display = 'block';
          }
          return;
        }

        if (submitButton) {
          submitButton.disabled = true;
        }
        const originalLabel = submitButton ? submitButton.textContent : '';

        if (submitButton) {
          submitButton.textContent = 'Wird übersetzt …';
        }

        try {
          const payload = {
            source_text: text,
            direction,
            modes
          };

          // Netlify Function als Proxy zum Make-Webhook
          const res = await fetch('/.netlify/functions/buzzframe-transform', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          });

          if (!res.ok) {
            throw new Error('HTTP ' + res.status);
          }

          const data = await res.json().catch(() => ({}));
          const output =
            (typeof data === 'string'
              ? data
              : (data.text || data.output || '')) || '';

          if (!output.trim()) {
            throw new Error('EMPTY_RESPONSE');
          }

          if (responseText) {
            responseText.value = output;
          }
          if (copyStatus) {
            copyStatus.textContent = '';
          }
          if (responseCard) {
            responseCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        } catch (err) {
          if (responseText && !responseText.value.trim()) {
            responseText.value =
              'Der Text konnte gerade nicht generiert werden. Versuche es in wenigen Minuten erneut oder kürze den Input.';
          }
          if (formError) {
            formError.textContent =
              'Verbindungsfehler. Bitte versuche es später erneut.';
            formError.style.display = 'block';
          }
          console.error('BuzzFrame error:', err);
        } finally {
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.textContent = originalLabel;
          }
        }
      }

      async function handleReset() {
        form.reset();
        const modeBlockDecode = document.getElementById('mode-decode-block');
        const modeBlockEncode = document.getElementById('mode-encode-block');
        if (modeBlockDecode) modeBlockDecode.classList.add('hidden');
        if (modeBlockEncode) modeBlockEncode.classList.add('hidden');

        if (formError) {
          formError.style.display = 'none';
          formError.textContent = '';
        }
        if (responseText) {
          responseText.value = '';
        }
        if (copyStatus) {
          copyStatus.textContent = '';
        }

        const active = document.querySelectorAll('.radio-option--active');
        active.forEach(el => el.classList.remove('radio-option--active'));
      }

      form.addEventListener('submit', handleSubmit);
      if (resetButton) {
        resetButton.addEventListener('click', handleReset);
      }
    })();

    // Copy to clipboard + Output reset
    (function () {
      const copyButton = document.getElementById('copyButton');
      const resetOutputButton = document.getElementById('resetOutput');
      const responseText = document.getElementById('responseText');
      const copyStatus = document.getElementById('copyStatus');

      if (copyButton && responseText) {
        copyButton.addEventListener('click', async function () {
          const text = responseText.value || '';
          if (!text.trim()) {
            if (copyStatus) {
              copyStatus.textContent = 'Kein Text zum Kopieren vorhanden.';
              setTimeout(() => { copyStatus.textContent = ''; }, 2200);
            }
            return;
          }

          try {
            await navigator.clipboard.writeText(text);
            if (copyStatus) {
              copyStatus.textContent = 'Kopiert.';
              setTimeout(() => { copyStatus.textContent = ''; }, 2000);
            }
          } catch {
            if (copyStatus) {
              copyStatus.textContent = 'Kopieren nicht möglich. Markiere und kopiere manuell.';
              setTimeout(() => { copyStatus.textContent = ''; }, 2600);
            }
          }
        });
      }

      if (resetOutputButton && responseText) {
        resetOutputButton.addEventListener('click', function () {
          responseText.value = '';
          if (copyStatus) {
            copyStatus.textContent = '';
          }
        });
      }
    })();
  </script>
</body>
</html>
